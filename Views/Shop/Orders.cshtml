@model List<LoginPanel.Models.OrderListItem>
@{
    ViewBag.Title = "My Orders";
    Layout = "~/Views/Shared/ShopLayout.cshtml";
}

<h3 class="mb-3">My Orders</h3>
@* @functions {
    string ImgByProduct(string name)
    {
        if (string.IsNullOrWhiteSpace(name))
            return "/images/no-image.png";

        var n = name.ToLower();

        var map = new Dictionary<string, string>
        {
            { "iphone 15", "/images/iphone15.jpg" },
            { "iphone 14", "/images/iphone14.jpg" },
            { "GooglePixel8", "/images/GooglePixel8.png" },
            { "AppleMacBook", "/images/AppleMacBook.png" },
            { "Acer", "/images/Acer.png" },
            { "LenovoThinkPad", "/images/LenovoThinkPad.png" },
            { "LenovoThinkPad", "/images/LenovoThinkPad.png" },
            { "HPPAVILION1", "/images/HPPAVILION1.png" },
            { "dell xps", "/images/delllaptop04.png" },
            { "samsung a54", "/images/samsunga.jpg" },
            { "s24", "/images/samsung24.png" },
            { "redmi", "/images/redminote.jpg" },
            { "xiaomi", "/images/redminote.jpg" },
            { "oneplus", "/images/oneplus.jpg" },
            { "realme", "/images/Realme1.png" }
        };

        foreach (var kv in map)
        {
            if (n.Contains(kv.Key))
                return kv.Value;
        }

        return "/images/no-image.png";
    }
}
 *@
<div class="card mb-3">
    <div class="card-body">

        <label>Select Order Type</label>

        <select id="orderFilter" class="form-select" onchange="loadHistory()">
            <option value="All">All Orders</option>
            <option value="Delivered">Delivered</option>
            <option value="Cancelled">Cancelled</option>
        </select>

    </div>
</div>
@if (Model == null || Model.Count == 0)
{
    <div class="alert alert-info">
        No orders yet. <a href="@Url.Action("Index", "Shop")">Shop now</a>
    </div>
}


else
{
    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Product</th>
                        <th>Order</th>
                        <th>Date</th>
                        <th>Status</th>
                        
                        <th class="text-end">Items</th>
                        <th class="text-end">Total</th>
                        <th style="width:120px;"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var o in Model)
                    {
                        <tr>
                            <td>
                                <img src="@o.ImageUrl"
                                     style="width:60px;height:60px;object-fit:cover"
                                     class="rounded border" />
                            </td>


                            <td class="fw-semibold">#@o.OrderId</td>
                            <td>@o.OrderDate.ToString("dd-MMM-yyyy")</td>
                            <td>
                                <span class="badge text-bg-success">@o.Status</span>
                            </td>
                            <td class="text-end">@o.ItemCount</td>
                            <td class="text-end fw-bold">₹ @o.TotalAmount</td>
                            <td class="text-end">
                                <a class="btn btn-sm btn-outline-dark"
                                   href="@Url.Action("OrderDetails", "Shop", new { id = o.OrderId })">
                                    View
                                </a>
                            </td>
                        </tr>

                    }
                </tbody>
            </table>
        </div>
    </div>
}
